___INFO___

{
  "displayName": "Quantum Metric JS Tag",
  "description": "JavaScript tag to capture high-fidelity user-experience data",
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCRTNGMUY5QzBDQzBFNTExQjU1OUExMEU5ODM4RTBGRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCQzE4NTZGODA1MEQxMUU2QTBGRkJGMTk1NEI3NjJENSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCQzE4NTZGNzA1MEQxMUU2QTBGRkJGMTk1NEI3NjJENSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxNERCOTg0RjBEMDVFNjExQkFGMzhCRDgwODFENzE0MSIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmNkNzllOWMyLWVhZjUtMTFlNS1iNDI2LThmODAyNGE0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",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "displayName": "Sub Name",
    "simpleValueType": true,
    "name": "subName",
    "type": "TEXT",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Enter your QM sub name. For example, you'd enter amazingcompany if your QM URL was https://amazingcompany.quantummetric.com.",
    "notSetText": "Sub Name is required"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.quantummetric.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
var log = require('logToConsole');
var injectScript = require('injectScript');
var encodeUriComponent = require('encodeUriComponent');


const subName = data.subName;
log("subName: "+subName);

const encSubName = encodeUriComponent(subName);
log("encSubName: "+encSubName);

const url = "https://cdn.quantummetric.com/qscripts/quantum-"+encSubName+".js";

function onFailure() {
  log("Failed to load Quantum Metric library");
  data.gtmOnFailure();
}

function onSuccess() {
  log("Loaded Quantum Metric library");
  data.gtmOnSuccess();
}

injectScript(url, onSuccess, onFailure);


___NOTES___

Created on 9/9/2019, 1:24:13 PM
